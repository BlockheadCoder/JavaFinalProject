<!DOCTYPE html>
<html>
    <head>
        <meta charset="ISO-8859-1">
        <title>Conversation</title>
        <script>
            var myId = "[[${myId}]]";
            var recId = "[[${recId}]]";
        </script>
        <script type="text/javascript" src="/js/app.js"></script>
        <script src="/webjars/jquery/jquery.min.js"></script>
        <script src="/webjars/sockjs-client/sockjs.min.js"></script>
        <script src="/webjars/stomp-websocket/stomp.min.js"></script>
        <link rel="stylesheet" type="text/css" medial="all" th:href="@{/css/styles.css}" />
    </head>
    <body onload="connect()">

        <h1>You are [[${myName}]]</h1>
        <h1>Sending to [[${yourName}]]</h1>
        
        <div id="messageHolder">
        	<th:block th:each="message: ${allMessages}">                
                <div id="messageLeft" th:if="${message.receiverId==myId}">
                    <div class="sentMessage" id="theirMessage">
                        <h3 th:text="${message.message}"></h3>
                    </div>
                </div>

                <div id="messageRight" th:if="${message.senderId==myId}">
                    <div class="sentMessage" id="myMessage">
                        <h3 th:text="${message.message}"></h3>
                    </div>
                </div>
            </th:block>
        </div>
        
        <div id="right">
        	<span>Message:</span> <input type="text" id="message" />
        	<input type="button" value="Send Message" onclick="sendMessage()">
        </div>
        
        <div>
        	<a th:href="@{/account}">Home</a>
        </div> <br>
        
        <form th:action="@{/logout}" method="POST">
			<input type="submit" id="logout-submit" name="logout-submit" value="Log Out">
		</form>
    </body>
</html>